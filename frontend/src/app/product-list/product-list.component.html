<div class="product-list-container">
    <div class="header">
        <h1>Products</h1>
        <div class="search-filter-container">
            <mat-form-field appearance="outline">
                <mat-label>Search</mat-label>
                <input matInput [ngModel]="searchQuery" (ngModelChange)="onSearchChange($event)" name="searchQuery"
                    (keyup.enter)="onSearch()" placeholder="Search products...">
                <button mat-icon-button matSuffix (click)="onSearch()">
                    <mat-icon>search</mat-icon>
                </button>
            </mat-form-field>

            <div class="filters">
                <mat-form-field appearance="outline" class="price-input">
                    <mat-label>Min Price</mat-label>
                    <input matInput type="number" [ngModel]="minPrice" (ngModelChange)="onMinPriceChange($event)"
                        name="minPrice" placeholder="0">
                </mat-form-field>
                <mat-form-field appearance="outline" class="price-input">
                    <mat-label>Max Price</mat-label>
                    <input matInput type="number" [ngModel]="maxPrice" (ngModelChange)="onMaxPriceChange($event)"
                        name="maxPrice" placeholder="5000">
                </mat-form-field>
                <button mat-raised-button color="accent" (click)="onFilter()">Filter</button>
                <button mat-button (click)="onClearFilters()">Clear</button>
            </div>
        </div>
    </div>

    <div class="products-grid">
        <mat-card *ngFor="let product of products" class="product-card">
            <img mat-card-image [src]="product.imageUrls?.[0] || 'assets/placeholder.png'" alt="Product Image">
            <mat-card-content>
                <h2>{{ product.name }}</h2>
                <p class="description">{{ product.description }}</p>
                <p class="price">${{ product.price }}</p>
            </mat-card-content>
            <mat-card-actions>
                <button mat-raised-button color="primary" (click)="addToCart(product)">Add to Cart</button>
                <button mat-icon-button color="warn" (click)="toggleWishlist(product)" *ngIf="isLoggedIn">
                    <mat-icon>{{ isInWishlist(product) ? 'favorite' : 'favorite_border' }}</mat-icon>
                </button>
            </mat-card-actions>
        </mat-card>
    </div>
</div>