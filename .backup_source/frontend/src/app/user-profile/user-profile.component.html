<div class="profile-container">
    <h1>Profile</h1>

    <!-- 1. Account Section -->
    <mat-card class="profile-section">
        <mat-card-header>
            <mat-card-title>Account</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <mat-form-field appearance="fill">
                <mat-label>Email</mat-label>
                <input matInput [value]="userEmail" disabled>
            </mat-form-field>
        </mat-card-content>
    </mat-card>

    <!-- 2. Security Section -->
    <mat-card class="profile-section">
        <mat-card-header>
            <mat-card-title>Security</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="passwordForm" (ngSubmit)="onPasswordSubmit()">
                <mat-form-field appearance="fill">
                    <mat-label>New Password</mat-label>
                    <input matInput formControlName="password" type="password">
                </mat-form-field>

                <div *ngIf="passwordSuccessMessage" class="success-message">
                    {{ passwordSuccessMessage }}
                </div>
                <div *ngIf="passwordErrorMessage" class="error-message">
                    {{ passwordErrorMessage }}
                </div>

                <button mat-raised-button color="warn" type="submit"
                    [disabled]="!passwordForm.valid || !passwordForm.get('password')?.value">
                    Update Password
                </button>
            </form>
        </mat-card-content>
    </mat-card>

    <!-- 3. Personal Information Section -->
    <mat-card class="profile-section">
        <mat-card-header>
            <mat-card-title>Personal Information</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="infoForm" (ngSubmit)="onInfoSubmit()">
                <mat-form-field appearance="fill">
                    <mat-label>Phone Number (Optional)</mat-label>
                    <input matInput formControlName="phoneNumber">
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>Street</mat-label>
                    <input matInput formControlName="street">
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>City</mat-label>
                    <input matInput formControlName="city">
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>Zip Code</mat-label>
                    <input matInput formControlName="zip">
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>Country</mat-label>
                    <input matInput formControlName="country">
                </mat-form-field>

                <div *ngIf="successMessage" class="success-message">
                    {{ successMessage }}
                </div>
                <div *ngIf="errorMessage" class="error-message">
                    {{ errorMessage }}
                </div>

                <button mat-raised-button color="primary" type="submit" [disabled]="!infoForm.valid">
                    Save Information
                </button>
            </form>
        </mat-card-content>
    </mat-card>
</div>